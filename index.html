<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Рассыпающаяся картинка</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <div class="container">
    <img 
      src="https://via.placeholder.com/120x120/3498db/ffffff?text=CLICK" 
      alt="Кликни на меня" 
      class="shatter-img" 
      id="shatterImg"
    >
  </div>

  <script>
    document.getElementById("shatterImg").addEventListener("click", function(e) {
      const img = this;
      const rect = img.getBoundingClientRect();
      const container = img.closest('.container');
      const words = ["Счастье", "Мечта", "Свет", "Звезда", "Полёт"];

      // Размер одного кусочка (10x10 сетка)
      const pieceW = 12;
      const pieceH = 12;

      // Создаём 100 кусочков
      for (let row = 0; row < 10; row++) {
        for (let col = 0; col < 10; col++) {
          const piece = document.createElement('div');
          piece.classList.add('piece');
          piece.style.width = pieceW + 'px';
          piece.style.height = pieceH + 'px';

          // ВАЖНО: задаём фон и позицию фонового изображения
          piece.style.backgroundImage = `url('${img.src}')`;
          piece.style.backgroundSize = `${rect.width}px ${rect.height}px`;
          piece.style.backgroundPosition = `-${col * pieceW}px -${row * pieceH}px`;

          // Начальная позиция — где был фрагмент на картинке
          piece.style.left = (rect.left + col * pieceW) + 'px';
          piece.style.top = (rect.top + row * pieceH) + 'px';

          // Случайное направление
          const angle = Math.random() * Math.PI * 2;
          const speed = 20 + Math.random() * 50;
          const vx = Math.cos(angle) * speed;
          const vy = Math.sin(angle) * speed;
          const rotation = -20 + Math.random() * 40;

          container.appendChild(piece);

          // Анимация полёта
          setTimeout(() => {
            piece.style.transition = 'all 1s cubic-bezier(0.17, 0.67, 0.2, 1)';
            piece.style.transform = `translate(${vx}px, ${vy}px) rotate(${rotation}deg) scale(0.85)`;
            piece.style.opacity = '0';
          }, 10);

          // Удаляем после анимации
          setTimeout(() => piece.remove(), 1000);
        }
      }

      // Убираем исходную картинку
      img.style.opacity = '0';
      setTimeout(() => img.remove(), 300);

      // Показываем слова через 0.6 сек
      setTimeout(() => {
        words.forEach((word, i) => {
          const angle = (Math.PI * 2 * i) / 5;
          const distance = 100 + Math.random() * 30;
          const x = e.clientX + Math.cos(angle) * distance;
          const y = e.clientY + Math.sin(angle) * distance;

          const wordEl = document.createElement('div');
          wordEl.classList.add('word');
          wordEl.textContent = word;
          wordEl.style.left = `${x}px`;
          wordEl.style.top = `${y}px`;
          container.appendChild(wordEl);
        });
      }, 600);
    });
  </script>

</body>
</html>
